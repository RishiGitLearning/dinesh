/*
 * frmTextProperties.java
 *
 * Created on July 10, 2007, 3:44 PM
 */

package TReportWriter;

/**
 *
 * @author  root
 */
import javax.swing.*;
import java.awt.*;
import TReportWriter.*;
import java.util.*;


public class frmDBFIELDProperties extends javax.swing.JApplet {
    
    public TDBField objText;
    public boolean cancelled=false;
    private TEITLComboModel cmbDataTypeModel=new TEITLComboModel();
    private JDialog aDialog;
        
    public frmDBFIELDProperties()
    {
        setSize(481,390);
        initComponents();
        GenerateCombo();
    }
    
    /** This method is called from within the init() method to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        opgAlignments = new javax.swing.ButtonGroup();
        jLabel1 = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        txtText = new javax.swing.JTextArea();
        chkMultiline = new javax.swing.JCheckBox();
        jLabel2 = new javax.swing.JLabel();
        jPanel1 = new javax.swing.JPanel();
        opgLeft = new javax.swing.JRadioButton();
        opgCenter = new javax.swing.JRadioButton();
        opgRight = new javax.swing.JRadioButton();
        jLabel3 = new javax.swing.JLabel();
        txtWidth = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        jPanel2 = new javax.swing.JPanel();
        jLabel5 = new javax.swing.JLabel();
        txtX = new javax.swing.JTextField();
        jLabel6 = new javax.swing.JLabel();
        txtY = new javax.swing.JTextField();
        jLabel8 = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        txtPrintCondition = new javax.swing.JTextArea();
        cmdOK = new javax.swing.JButton();
        cmdCancel = new javax.swing.JButton();
        jLabel7 = new javax.swing.JLabel();
        txtFormat = new javax.swing.JTextField();
        jLabel9 = new javax.swing.JLabel();
        cmbDataType = new javax.swing.JComboBox();
        chkBlank = new javax.swing.JCheckBox();
        chkConvertToWords = new javax.swing.JCheckBox();

        getContentPane().setLayout(null);

        addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                formMouseClicked(evt);
            }
        });

        jLabel1.setText("Display Text");
        getContentPane().add(jLabel1);
        jLabel1.setBounds(9, 9, 110, 15);

        txtText.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtTextFocusLost(evt);
            }
        });

        jScrollPane1.setViewportView(txtText);

        getContentPane().add(jScrollPane1);
        jScrollPane1.setBounds(8, 27, 320, 60);

        chkMultiline.setText("Multi Line");
        getContentPane().add(chkMultiline);
        chkMultiline.setBounds(7, 89, 98, 23);

        jLabel2.setText("Alignment ");
        getContentPane().add(jLabel2);
        jLabel2.setBounds(15, 151, 69, 15);

        jPanel1.setLayout(null);

        jPanel1.setBorder(new javax.swing.border.EtchedBorder());
        opgLeft.setText("Left");
        opgAlignments.add(opgLeft);
        jPanel1.add(opgLeft);
        opgLeft.setBounds(3, 4, 60, 18);

        opgCenter.setText("Center");
        opgAlignments.add(opgCenter);
        jPanel1.add(opgCenter);
        opgCenter.setBounds(65, 4, 80, 18);

        opgRight.setText("Right");
        opgAlignments.add(opgRight);
        jPanel1.add(opgRight);
        opgRight.setBounds(152, 4, 60, 18);

        getContentPane().add(jPanel1);
        jPanel1.setBounds(87, 148, 240, 25);

        jLabel3.setText("Width ");
        getContentPane().add(jLabel3);
        jLabel3.setBounds(38, 192, 45, 15);

        getContentPane().add(txtWidth);
        txtWidth.setBounds(87, 190, 70, 19);

        jLabel4.setText("Position");
        getContentPane().add(jLabel4);
        jLabel4.setBounds(167, 192, 60, 15);

        jPanel2.setLayout(null);

        jPanel2.setBorder(new javax.swing.border.EtchedBorder());
        jLabel5.setText("X");
        jPanel2.add(jLabel5);
        jLabel5.setBounds(9, 4, 10, 15);

        jPanel2.add(txtX);
        txtX.setBounds(23, 3, 60, 19);

        jLabel6.setText("Y");
        jPanel2.add(jLabel6);
        jLabel6.setBounds(94, 5, 10, 15);

        jPanel2.add(txtY);
        txtY.setBounds(108, 4, 60, 19);

        getContentPane().add(jPanel2);
        jPanel2.setBounds(230, 189, 180, 25);

        jLabel8.setText("Print Condition ");
        getContentPane().add(jLabel8);
        jLabel8.setBounds(9, 300, 160, 15);

        jScrollPane2.setViewportView(txtPrintCondition);

        getContentPane().add(jScrollPane2);
        jScrollPane2.setBounds(8, 320, 320, 40);

        cmdOK.setText("OK");
        cmdOK.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cmdOKActionPerformed(evt);
            }
        });

        getContentPane().add(cmdOK);
        cmdOK.setBounds(363, 19, 88, 25);

        cmdCancel.setText("Cancel");
        cmdCancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cmdCancelActionPerformed(evt);
            }
        });

        getContentPane().add(cmdCancel);
        cmdCancel.setBounds(363, 52, 88, 25);

        jLabel7.setText("Format");
        getContentPane().add(jLabel7);
        jLabel7.setBounds(31, 224, 50, 15);

        getContentPane().add(txtFormat);
        txtFormat.setBounds(89, 221, 110, 19);

        jLabel9.setText("Data Type");
        getContentPane().add(jLabel9);
        jLabel9.setBounds(13, 121, 63, 15);

        getContentPane().add(cmbDataType);
        cmbDataType.setBounds(87, 117, 240, 20);

        chkBlank.setText("Blank when zero");
        getContentPane().add(chkBlank);
        chkBlank.setBounds(176, 90, 150, 23);

        chkConvertToWords.setText("Convert To Words");
        getContentPane().add(chkConvertToWords);
        chkConvertToWords.setBounds(92, 255, 180, 23);

    }//GEN-END:initComponents

    private void txtTextFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtTextFocusLost
        // TODO add your handling code here:
        try
        {
            //txtWidth.setText(Integer.toString(txtText.getText().length()));
        }
        catch(Exception e)
        {
            
        }
    }//GEN-LAST:event_txtTextFocusLost

    private void cmdCancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cmdCancelActionPerformed
        // TODO add your handling code here:
        cancelled=true;
        aDialog.dispose();
    }//GEN-LAST:event_cmdCancelActionPerformed

    private void cmdOKActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cmdOKActionPerformed
        // TODO add your handling code here:
        try {
            
            objText.Text=txtText.getText();
            objText.MultiLine=chkMultiline.isSelected();
            objText.DataType=cmbDataType.getSelectedItem().toString();
            objText.BlankWhenNull=chkBlank.isSelected();
            objText.ConvertToWords=chkConvertToWords.isSelected();
            
            if(opgLeft.isSelected())
            {
             objText.Alignment=TTextField.Left;   
            }
            
            if(opgRight.isSelected())
            {
             objText.Alignment=TTextField.Right;   
            }
            
            if(opgCenter.isSelected())
            {
             objText.Alignment=TTextField.Center;   
            }

            objText.Width=Integer.parseInt(txtWidth.getText());
            objText.PositionX=Integer.parseInt(txtX.getText());
            objText.PositionY=Integer.parseInt(txtY.getText());
            objText.PrintCondition=txtPrintCondition.getText();
            objText.FormatString=txtFormat.getText();
            
            cancelled=false;
            aDialog.dispose();
        }
        catch(Exception e) {
            
        }
        
    }//GEN-LAST:event_cmdOKActionPerformed

    private void formMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_formMouseClicked
        // TODO add your handling code here:
        
    }//GEN-LAST:event_formMouseClicked
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JCheckBox chkBlank;
    private javax.swing.JCheckBox chkConvertToWords;
    private javax.swing.JCheckBox chkMultiline;
    private javax.swing.JComboBox cmbDataType;
    private javax.swing.JButton cmdCancel;
    private javax.swing.JButton cmdOK;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.ButtonGroup opgAlignments;
    private javax.swing.JRadioButton opgCenter;
    private javax.swing.JRadioButton opgLeft;
    private javax.swing.JRadioButton opgRight;
    private javax.swing.JTextField txtFormat;
    private javax.swing.JTextArea txtPrintCondition;
    private javax.swing.JTextArea txtText;
    private javax.swing.JTextField txtWidth;
    private javax.swing.JTextField txtX;
    private javax.swing.JTextField txtY;
    // End of variables declaration//GEN-END:variables


    private Frame findParentFrame(JApplet pApplet) {
        Container c = (Container) pApplet;
        while(c != null){
            if (c instanceof Frame)
                return (Frame)c;
            
            c = c.getParent();
        }
        return (Frame)null;
    }
    
    
    public void ShowDialog() {
        setSize(481,394);
        
        LoadProperties();
        
        Frame f=findParentFrame(this);
        
        aDialog=new JDialog(f,"Text Field Properties",true);
        
        aDialog.getContentPane().add("Center",this);
        Dimension appletSize = this.getSize();
        aDialog.setSize(appletSize);
        aDialog.setResizable(false);
        
        //Place it to center of the screen
        Dimension screenSize=Toolkit.getDefaultToolkit().getScreenSize();
        aDialog.setLocation((int)(screenSize.getWidth()-appletSize.getWidth())/2,(int)(screenSize.getHeight()-appletSize.getHeight())/2);
        
        aDialog.setDefaultCloseOperation(javax.swing.JDialog.DISPOSE_ON_CLOSE);
        aDialog.show();
        
    }

    private void LoadProperties() {
        try {
            
            GenerateCombo();
            txtText.setText(objText.Text);
            chkMultiline.setSelected(objText.MultiLine);
            cmbDataType.setSelectedItem(objText.DataType);
            chkBlank.setSelected(objText.BlankWhenNull);
            chkConvertToWords.setSelected(objText.ConvertToWords);
            
            switch(objText.Alignment)
            {
                case TTextField.Left:
                    opgLeft.setSelected(true);break;
                case TTextField.Right:
                    opgRight.setSelected(true);break;
                case TTextField.Center:
                    opgCenter.setSelected(true);break;
            }
            
            txtWidth.setText(Integer.toString(objText.Width));
            txtX.setText(Integer.toString(objText.PositionX));
            txtY.setText(Integer.toString(objText.PositionY));
            
            txtPrintCondition.setText(objText.PrintCondition);
            txtFormat.setText(objText.FormatString);
        }
        catch(Exception e) {
            
        }
    }
    
    private void GenerateCombo()
    {
      try
      {
        cmbDataTypeModel=new TEITLComboModel();
        cmbDataType.removeAllItems();
        cmbDataType.setModel(cmbDataTypeModel);
        
        TComboData aData=new TComboData();
        aData.strCode="String";
        aData.Text="String";
        cmbDataTypeModel.addElement(aData);
        
        aData=new TComboData();
        aData.strCode="Numeric";
        aData.Text="Numeric";
        cmbDataTypeModel.addElement(aData);
        
        aData=new TComboData();
        aData.strCode="Date";
        aData.Text="Date";
        cmbDataTypeModel.addElement(aData);
        
      }
      catch(Exception e)
      {
          
      }
    }
    
}
