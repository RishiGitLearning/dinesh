/*
 * frmOrder.java
 *
 * Created on August 30, 2012, 5:13 AM
 */

package EITLERP.Production.ReportUI;

/**
 *
 * @author  root
 */

import javax.swing.*;
import java.awt.*;
import java.util.*;
import EITLERP.*;
import EITLERP.Purchase.*;
import EITLERP.Utils.*;
import javax.swing.table.*;
import javax.swing.event.*;
import java.awt.event.*;
import java.text.*;
import javax.swing.text.*;
import java.sql.*;
import java.net.*;
import java.io.*;
import java.applet.*;

public class frmOrder extends javax.swing.JApplet {
    

   //String DocNo = (String) objOrder.getAttribute("PIECE_NO").getObj();
       
      // private clsOrder objOrder;
       //private clsOrder_1 objOrder;
    private clsOrderParty objOrder;
    /** Initializes the applet frmOrder */
    public void init() {
        
        System.gc();
        setSize(1000, 650);        
        initComponents();   
        //Now show the Images
        cmdTop.setIcon(EITLERPGLOBAL.getImage("TOP"));
        cmdBack.setIcon(EITLERPGLOBAL.getImage("BACK"));
        cmdNext.setIcon(EITLERPGLOBAL.getImage("NEXT"));
        cmdLast.setIcon(EITLERPGLOBAL.getImage("LAST"));
        cmdNew.setIcon(EITLERPGLOBAL.getImage("NEW"));
        cmdEdit.setIcon(EITLERPGLOBAL.getImage("EDIT"));
        cmdDelete.setIcon(EITLERPGLOBAL.getImage("DELETE"));
        cmdSave.setIcon(EITLERPGLOBAL.getImage("SAVE"));
        cmdCancel.setIcon(EITLERPGLOBAL.getImage("UNDO"));
        cmdFilter.setIcon(EITLERPGLOBAL.getImage("FIND"));
        cmdPreview.setIcon(EITLERPGLOBAL.getImage("PREVIEW"));
        cmdPrint.setIcon(EITLERPGLOBAL.getImage("PRINT"));
        cmdExit.setIcon(EITLERPGLOBAL.getImage("EXIT"));
       // DisplayData();
        
    }
    
    /** This method is called from within the init() method to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        ToolBar = new javax.swing.JToolBar();
        cmdTop = new javax.swing.JButton();
        cmdBack = new javax.swing.JButton();
        cmdNext = new javax.swing.JButton();
        cmdLast = new javax.swing.JButton();
        cmdNew = new javax.swing.JButton();
        cmdEdit = new javax.swing.JButton();
        cmdDelete = new javax.swing.JButton();
        cmdSave = new javax.swing.JButton();
        cmdCancel = new javax.swing.JButton();
        cmdFilter = new javax.swing.JButton();
        cmdPreview = new javax.swing.JButton();
        cmdPrint = new javax.swing.JButton();
        cmdExit = new javax.swing.JButton();
        cmdShortClose = new javax.swing.JButton();
        lblTitle = new javax.swing.JLabel();
        jTabbedPane1 = new javax.swing.JTabbedPane();
        jPanel1 = new javax.swing.JPanel();
        jLabel2 = new javax.swing.JLabel();
        txtPieceNo = new javax.swing.JTextField();
        jLabel3 = new javax.swing.JLabel();
        txtOrderDate = new javax.swing.JTextField();
        jLabel4 = new javax.swing.JLabel();
        txtProductCode = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        txtPartyCode = new javax.swing.JTextField();

        getContentPane().setLayout(null);

        ToolBar.add(cmdTop);

        ToolBar.add(cmdBack);

        ToolBar.add(cmdNext);

        ToolBar.add(cmdLast);

        ToolBar.add(cmdNew);

        ToolBar.add(cmdEdit);

        ToolBar.add(cmdDelete);

        ToolBar.add(cmdSave);

        ToolBar.add(cmdCancel);

        ToolBar.add(cmdFilter);

        ToolBar.add(cmdPreview);

        ToolBar.add(cmdPrint);

        ToolBar.add(cmdExit);

        cmdShortClose.setText("Short Close");
        ToolBar.add(cmdShortClose);

        getContentPane().add(ToolBar);
        ToolBar.setBounds(0, 0, 400, 40);

        lblTitle.setBackground(new java.awt.Color(0, 102, 153));
        lblTitle.setForeground(new java.awt.Color(255, 255, 255));
        lblTitle.setText("ORDER");
        getContentPane().add(lblTitle);
        lblTitle.setBounds(0, 40, 400, 30);

        jPanel1.setLayout(null);

        jLabel2.setText("Piece No");
        jPanel1.add(jLabel2);
        jLabel2.setBounds(20, 20, 60, 15);

        txtPieceNo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txtPieceNoActionPerformed(evt);
            }
        });

        jPanel1.add(txtPieceNo);
        txtPieceNo.setBounds(90, 20, 100, 19);

        jLabel3.setText("Order Date");
        jPanel1.add(jLabel3);
        jLabel3.setBounds(200, 20, 80, 15);

        jPanel1.add(txtOrderDate);
        txtOrderDate.setBounds(290, 20, 80, 19);

        jLabel4.setText("Product Code");
        jPanel1.add(jLabel4);
        jLabel4.setBounds(20, 80, 83, 15);

        jPanel1.add(txtProductCode);
        txtProductCode.setBounds(120, 80, 70, 19);

        jLabel1.setText("jLabel1");
        jPanel1.add(jLabel1);
        jLabel1.setBounds(20, 50, 60, 15);

        jPanel1.add(txtPartyCode);
        txtPartyCode.setBounds(90, 50, 100, 19);

        jTabbedPane1.addTab("Order Header", jPanel1);

        getContentPane().add(jTabbedPane1);
        jTabbedPane1.setBounds(0, 70, 400, 230);

    }//GEN-END:initComponents

    private void txtPieceNoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txtPieceNoActionPerformed
        // TODO add your handling code here:
        OrderShowData();
    }//GEN-LAST:event_txtPieceNoActionPerformed
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JToolBar ToolBar;
    private javax.swing.JButton cmdBack;
    private javax.swing.JButton cmdCancel;
    private javax.swing.JButton cmdDelete;
    private javax.swing.JButton cmdEdit;
    private javax.swing.JButton cmdExit;
    private javax.swing.JButton cmdFilter;
    private javax.swing.JButton cmdLast;
    private javax.swing.JButton cmdNew;
    private javax.swing.JButton cmdNext;
    private javax.swing.JButton cmdPreview;
    private javax.swing.JButton cmdPrint;
    private javax.swing.JButton cmdSave;
    private javax.swing.JButton cmdShortClose;
    private javax.swing.JButton cmdTop;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JTabbedPane jTabbedPane1;
    private javax.swing.JLabel lblTitle;
    private javax.swing.JTextField txtOrderDate;
    private javax.swing.JTextField txtPartyCode;
    private javax.swing.JTextField txtPieceNo;
    private javax.swing.JTextField txtProductCode;
    // End of variables declaration//GEN-END:variables
    
    
   // public void FindEx(String pPartyCode,String pPieceNo)
    public void FindEx(int pCompanyID,String pPieceNo) {
     System.out.println(pCompanyID);
     System.out.println(pPieceNo);
     System.out.println("test1"); 
    /*objOrder.Filter(" WHERE PIECE_NO ='"+pPieceNo+"'",pCompanyID);
    //objOrder.Filter(" WHERE PIECE_NO = "+pPieceNo+"",pPieceNo);
    objOrder.MoveLast(); 
    DisplayData(); */
    /*try{  
        String  strSQL="";
        ResultSet rsTmp;
        strSQL= "";
        strSQL+="SELECT PIECE_NO,ORDER_DATE,PRODUCT_CODE FROM PRODUCTION.FELT_ORDER_MASTER WHERE PIECE_NO = "+pPieceNo+"";
        rsTmp=data.getResult(strSQL);
        rsTmp.first();
                txtPieceNo.setText(rsTmp.getString("PIECE_NO"));
                txtOrderDate.setText(rsTmp.getString("ORDER_DATE"));
                txtProductCode.setText(rsTmp.getString("PRODUCT_CODE"));       
      }
          catch(Exception e){
           
      } */ 
     
     System.out.println("test2");
     //objOrder.Abc(" WHERE PIECE_NO='"+pPieceNo+"'");     
     objOrder.Filter(" WHERE PIECE_NO='"+pPieceNo+"'");
     objOrder.MoveFirst();
     DisplayData();     
 }
    
   private void DisplayData() {
       ClearFields();
       
       //txtPieceNo.setText((String)objOrder.getAttribute("PIECE_NO").getObj());
       //txtOrderDate.setText((String)objOrder.getAttribute("ORDER_DATE").getObj());
       //txtProductCode.setText((String)objOrder.getAttribute("PRODUCT_CODE").getObj());
       //txtPartyCode.setText((String)objOrder.getAttribute("PARTY_CD").getObj());       
       txtPieceNo.setText(objOrder.getAttribute("PIECE_NO").getString());
       txtOrderDate.setText(objOrder.getAttribute("ORDER_DATE").getString());
       txtProductCode.setText(objOrder.getAttribute("PRODUCT_CODE").getString());
       
    /*   ClearFields();
       
       Connection tmpConn=null;
       Statement stTmp=null;
       ResultSet rsTmp=null;
       String ItemID="";
       int DeptID=0;
       try{
       txtPieceNo.setText((String)objOrder.getAttribute("PIECE_NO").getObj());
       txtOrderDate.setText((String)objOrder.getAttribute("ORDER_DATE").getObj());
       txtProductCode.setText((String)objOrder.getAttribute("PRODUCT_CODE").getObj());
       txtPartyCode.setText((String)objOrder.getAttribute("PARTY_CD").getObj());       
       }
       catch(Exception e){
           
       }*/
        /* Connection tmpConn=null;
        Statement stTmp=null;
        ResultSet rsTmp=null;
        String ItemID="";
        int DeptID=0;
        
       try {
            txtPieceNo.setText((String) objOrder.getAttribute("PIECE_NO").getObj());
            //lblTitle.setText("ORDER - "+txtPieceNo.getText());
            
            //lblRevNo.setText(Integer.toString((int)objOrder.getAttribute("REVISION_NO").getVal()));
            txtOrderDate.setText(EITLERPGLOBAL.formatDate((String) objOrder.getAttribute("ORDER_DATE").getObj()));
            //EITLERPGLOBAL.setComboIndex(cmbStatus,(String)objOrder.getAttribute("STATUS").getObj());
            //EITLERPGLOBAL.setComboIndex(cmbIndentType,(String)objOrder.getAttribute("INDENT_TYPE").getObj());
             }
             catch(Exception e) {
             EITLERPGLOBAL.ChangeCursorToDefault(this);
             }*/
    }    
    
   private void OrderShowData(){
       String PieceNo="";
       String strSQL="";
       
       
       try{
           PieceNo = txtPieceNo.getText().toString();
           ResultSet rsTmp,rsBuyer,rsIndent,rsRIA;
           strSQL= "SELECT PIECE_NO,ORDER_DATE,PRODUCT_CODE FROM PRODUCTION.FELT_ORDER_MASTER WHERE PIECE_NO ="+PieceNo+"";
           System.out.println(strSQL);
           rsTmp=data.getResult(strSQL);
           
           if(rsTmp.getRow()>0) {
                //int cnt=0;
                while(!rsTmp.isAfterLast()) {
                //cnt++;                     
                 Object[] rowData=new Object[3];
                    //rowData[0]=Integer.toString(cnt);
                    rowData[0]=rsTmp.getString("PIECE_NO");
                    rowData[1]=EITLERPGLOBAL.formatDate(rsTmp.getString("ORDER_DATE"));
                    rowData[2]=rsTmp.getString("PRODUCT_CODE");
                    //rowData[3]=EITLERPGLOBAL.formatDate(rsTmp.getString("RCVD_DATE"));
                    //rowData[3]=rsTmp.getString("ORDER_DATE");
                    /*rowData[5]=rsTmp.getString("RCVD_MTR");
                    rowData[6]=rsTmp.getString("RECD_KG");
                    rowData[7]=rsTmp.getString("RECD_WDTH");
                    rowData[8]=rsTmp.getString("INWARD_NO");
                    rowData[9]=rsTmp.getString("BALE_NO");
                   // rowData[10]=rsTmp.getString("GSQ");
                   // rowData[7]=rsTmp.getString("BALNK");*/
                    //DataModelU.addRow(rowData);
              //   System.out.println("rsTmp.getString('PIECE_NO')");
                    rsTmp.next();
                }           
       }
       }
       catch(Exception e){
        e.printStackTrace();
        JOptionPane.showMessageDialog(null,e.getMessage());
      }
   }
   
   private void ClearFields() {
       txtPieceNo.setText("");
       txtOrderDate.setText("");
       txtProductCode.setText("");
        //txtPartyCode.setText("");    
        
    }
}
