/*
 * SelectGatepassReq.java
 *
 * Created on May 28, 2004, 11:24 AM
 */
/*<APPLET CODE=SelectGatepassReq.Class HEIGHT=400 WIDTH=700></APPLET>*/

package EITLERP.Stores;

import javax.swing.*;
import java.awt.*;
import java.util.*;
import EITLERP.*; 
import javax.swing.table.*;
import javax.swing.event.*;
import java.awt.event.*;
 
/** 
 *
 * @author  nhpatel
 */
 
public class frmSubImportItem extends javax.swing.JApplet {
    
    public boolean Cancelled=true;
    private JDialog aDialog;

    public String ImportItemID="";
    public String SubItemID="";
    public boolean AllowEdit=false;
        
    
    public frmSubImportItem() {
        initComponents();
    }
    
    /** Initializes the applet SelectGatepassReq */
    /*public void init() {
        setSize(700,400);
        initComponents();
    }*/
    
    /** This method is called from within the init() method to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    private void initComponents() {//GEN-BEGIN:initComponents
        cmdOK = new javax.swing.JButton();
        cmdCancel = new javax.swing.JButton();
        lblTitle = new javax.swing.JLabel();
        jLabel1 = new javax.swing.JLabel();
        txtImportItemID = new javax.swing.JTextField();
        txtImportItemName = new javax.swing.JTextField();
        cmdBigEdit1 = new javax.swing.JButton();
        jLabel2 = new javax.swing.JLabel();
        txtSubItemID = new javax.swing.JTextField();
        txtSubItemName = new javax.swing.JTextField();
        cmdBigEdit2 = new javax.swing.JButton();
        jButton1 = new javax.swing.JButton();

        getContentPane().setLayout(null);

        addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                formMouseClicked(evt);
            }
        });

        cmdOK.setText("OK");
        cmdOK.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cmdOKActionPerformed(evt);
            }
        });

        getContentPane().add(cmdOK);
        cmdOK.setBounds(340, 210, 78, 25);

        cmdCancel.setText("Cancel");
        cmdCancel.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cmdCancelActionPerformed(evt);
            }
        });

        getContentPane().add(cmdCancel);
        cmdCancel.setBounds(430, 210, 79, 25);

        lblTitle.setBackground(new java.awt.Color(0, 102, 153));
        lblTitle.setForeground(java.awt.Color.white);
        lblTitle.setText(" IMPORT SUBSTITUTE ITEM INFORMATION");
        lblTitle.setBorder(new javax.swing.border.BevelBorder(javax.swing.border.BevelBorder.RAISED));
        lblTitle.setOpaque(true);
        getContentPane().add(lblTitle);
        lblTitle.setBounds(0, 0, 804, 25);

        jLabel1.setText("Import Item Code");
        getContentPane().add(jLabel1);
        jLabel1.setBounds(20, 40, 120, 15);

        txtImportItemID.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtImportItemIDFocusLost(evt);
            }
        });
        txtImportItemID.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtImportItemIDKeyPressed(evt);
            }
        });

        getContentPane().add(txtImportItemID);
        txtImportItemID.setBounds(140, 38, 130, 19);

        txtImportItemName.setEnabled(false);
        getContentPane().add(txtImportItemName);
        txtImportItemName.setBounds(140, 60, 360, 19);

        cmdBigEdit1.setText("...");
        cmdBigEdit1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cmdBigEdit1ActionPerformed(evt);
            }
        });

        getContentPane().add(cmdBigEdit1);
        cmdBigEdit1.setBounds(500, 60, 30, 20);

        jLabel2.setText("Substitute Item");
        getContentPane().add(jLabel2);
        jLabel2.setBounds(30, 100, 110, 15);

        txtSubItemID.addFocusListener(new java.awt.event.FocusAdapter() {
            public void focusLost(java.awt.event.FocusEvent evt) {
                txtSubItemIDFocusLost(evt);
            }
        });
        txtSubItemID.addKeyListener(new java.awt.event.KeyAdapter() {
            public void keyPressed(java.awt.event.KeyEvent evt) {
                txtSubItemIDKeyPressed(evt);
            }
        });

        getContentPane().add(txtSubItemID);
        txtSubItemID.setBounds(140, 100, 130, 19);

        txtSubItemName.setEnabled(false);
        getContentPane().add(txtSubItemName);
        txtSubItemName.setBounds(140, 120, 360, 19);

        cmdBigEdit2.setText("...");
        cmdBigEdit2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cmdBigEdit2ActionPerformed(evt);
            }
        });

        getContentPane().add(cmdBigEdit2);
        cmdBigEdit2.setBounds(500, 120, 30, 20);

        jButton1.setText("Manage Sustitute Items");
        jButton1.setEnabled(false);
        getContentPane().add(jButton1);
        jButton1.setBounds(10, 210, 190, 25);

    }//GEN-END:initComponents

    private void formMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_formMouseClicked
        // TODO add your handling code here:
    }//GEN-LAST:event_formMouseClicked

    private void cmdBigEdit2ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cmdBigEdit2ActionPerformed
        // TODO add your handling code here:
         try
        {
           BigEdit objBigEdit=new BigEdit();
           objBigEdit.theText=txtSubItemName;
           objBigEdit.ShowEdit();
        }
        catch(Exception e)
        {
            
        }
    }//GEN-LAST:event_cmdBigEdit2ActionPerformed

    private void cmdBigEdit1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cmdBigEdit1ActionPerformed
        // TODO add your handling code here:
        try
        {
           BigEdit objBigEdit=new BigEdit();
           objBigEdit.theText=txtImportItemName;
           objBigEdit.ShowEdit();
        }
        catch(Exception e)
        {
            
        }
    }//GEN-LAST:event_cmdBigEdit1ActionPerformed

    private void txtSubItemIDFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtSubItemIDFocusLost
        // TODO add your handling code here:
        txtSubItemName.setText(clsItem.getItemName(EITLERPGLOBAL.gCompanyID,txtSubItemID.getText()));
    }//GEN-LAST:event_txtSubItemIDFocusLost

    private void txtImportItemIDFocusLost(java.awt.event.FocusEvent evt) {//GEN-FIRST:event_txtImportItemIDFocusLost
        // TODO add your handling code here:
        txtImportItemName.setText(clsItem.getItemName(EITLERPGLOBAL.gCompanyID,txtImportItemID.getText()));
    }//GEN-LAST:event_txtImportItemIDFocusLost

    private void txtSubItemIDKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtSubItemIDKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode()==112) //F1 Key pressed
        {
            LOV aList=new LOV();
            
            aList.SQL="SELECT ITEM_ID,ITEM_DESCRIPTION FROM D_INV_ITEM_MASTER WHERE COMPANY_ID="+EITLERPGLOBAL.gCompanyID+" AND APPROVED=1 AND CANCELLED=0 ORDER BY ITEM_ID";
            aList.ReturnCol=1;
            aList.ShowReturnCol=true;
            aList.DefaultSearchOn=2;
            
            if(aList.ShowLOV()) {
                txtSubItemID.setText(aList.ReturnVal);
                txtSubItemName.setText(clsItem.getItemName(EITLERPGLOBAL.gCompanyID,aList.ReturnVal));
            }
        }
        
    }//GEN-LAST:event_txtSubItemIDKeyPressed

    private void txtImportItemIDKeyPressed(java.awt.event.KeyEvent evt) {//GEN-FIRST:event_txtImportItemIDKeyPressed
        // TODO add your handling code here:
        if(evt.getKeyCode()==112) //F1 Key pressed
        {
            LOV aList=new LOV();
            
            aList.SQL="SELECT ITEM_ID,ITEM_DESCRIPTION FROM D_INV_ITEM_MASTER WHERE COMPANY_ID="+EITLERPGLOBAL.gCompanyID+" AND APPROVED=1 AND CANCELLED=0 ORDER BY ITEM_ID";
            aList.ReturnCol=1;
            aList.ShowReturnCol=true;
            aList.DefaultSearchOn=2;
            
            if(aList.ShowLOV()) {
                txtImportItemID.setText(aList.ReturnVal);
                txtImportItemName.setText(clsItem.getItemName(EITLERPGLOBAL.gCompanyID,aList.ReturnVal));
            }
        }
       
    }//GEN-LAST:event_txtImportItemIDKeyPressed
                
    private void cmdCancelActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cmdCancelActionPerformed
        // TODO add your handling code here:
        Cancelled=true;
        aDialog.dispose();
    }//GEN-LAST:event_cmdCancelActionPerformed
    
    private void cmdOKActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cmdOKActionPerformed
        // TODO add your handling code here:
        if(AllowEdit)
        {
          if(txtImportItemID.getText().trim().equals("")||txtSubItemID.getText().trim().equals(""))  
          {
            JOptionPane.showMessageDialog(null,"Please enter both item id");
            return;
          }
        }
        
        Cancelled=false;
        aDialog.dispose();
    }//GEN-LAST:event_cmdOKActionPerformed
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton cmdBigEdit1;
    private javax.swing.JButton cmdBigEdit2;
    private javax.swing.JButton cmdCancel;
    private javax.swing.JButton cmdOK;
    private javax.swing.JButton jButton1;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel lblTitle;
    private javax.swing.JTextField txtImportItemID;
    private javax.swing.JTextField txtImportItemName;
    private javax.swing.JTextField txtSubItemID;
    private javax.swing.JTextField txtSubItemName;
    // End of variables declaration//GEN-END:variables
    
    
    
    
    
    private Frame findParentFrame(JApplet pApplet) {
        Container c = (Container) pApplet;
        while(c != null) {
            if (c instanceof Frame)
                return (Frame)c;
            
            c = c.getParent();
        }
        return (Frame)null;
    }
    
    public boolean ShowList() {
        try {
            
            setSize(559,271);
            
            if(!AllowEdit)
            {
                txtImportItemID.setEnabled(false);
                txtSubItemID.setEnabled(false);
            }
            
            txtImportItemID.setText(ImportItemID);
            txtImportItemName.setText(clsItem.getItemName(EITLERPGLOBAL.gCompanyID,txtImportItemID.getText()));
            txtSubItemID.setText(SubItemID);
            txtSubItemName.setText(clsItem.getItemName(EITLERPGLOBAL.gCompanyID,txtSubItemID.getText()));
            
                        
            Frame f=findParentFrame(this);
            
            aDialog=new JDialog(f,"Import Substitute Items",true);
            
            aDialog.getContentPane().add("Center",this);
            Dimension appletSize = this.getSize();
            aDialog.setSize(appletSize);
            aDialog.setResizable(false);
            
            //Place it to center of the screen
            Dimension screenSize=Toolkit.getDefaultToolkit().getScreenSize();
            aDialog.setLocation((int)(screenSize.width-appletSize.getWidth())/2,(int)(screenSize.height-appletSize.getHeight())/2);
            
            aDialog.setDefaultCloseOperation(javax.swing.JDialog.DISPOSE_ON_CLOSE);
            aDialog.show();
        }
        catch(Exception e) {
        }
        return !Cancelled;
    }
    
    
    
    
}
